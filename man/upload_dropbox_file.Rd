% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/endpoints.R
\name{upload_dropbox_file}
\alias{upload_dropbox_file}
\title{Upload a file to Dropbox}
\usage{
upload_dropbox_file(
  local_path,
  dropbox_path,
  mode = "add",
  token = NULL,
  cache_path = "~/R/.dropbox_token.rds"
)
}
\arguments{
\item{local_path}{Path to local file to upload. File must exist.}

\item{dropbox_path}{Destination path in Dropbox (e.g., "/data/myfile.csv").
Must start with a forward slash.}

\item{mode}{Write mode:
\itemize{
\item "add": Fail if file exists (default)
\item "overwrite": Replace existing file
\item "update": Update existing file (fails if file doesn't exist)
}}

\item{token}{OAuth token from dropbox_auth() (if NULL, uses cached token)}

\item{cache_path}{Path to cached token (default: "~/.dropbox_token.rds")}
}
\value{
Response from Dropbox API as a list containing file metadata
including: name, path_display, id, client_modified, server_modified,
rev, size, and content_hash
}
\description{
Uploads a file from your local filesystem to Dropbox. This function reads
the entire file into memory before uploading, so it's best suited for
files under 150MB. For larger files, consider using Dropbox's upload
session API.
}
\details{
\strong{Important:} If you're creating data programmatically (like a data frame),
you'll need to write it to a temporary file first, upload it, then clean up.
See examples below or use the convenience function upload_df_to_dropbox().

The function reads the entire file into memory as raw bytes before uploading,
so very large files may cause memory issues. The Dropbox API limit for
single uploads is 150MB.
}
\note{
\strong{Remember to clean up temporary files!}
\itemize{
\item Use \code{tempfile()} to create temporary files
\item Use \code{unlink()} to delete them after upload
\item Use \code{on.exit(unlink(temp_file))} to ensure cleanup happens even if errors occur
}

For uploading data frames directly, consider using upload_df_to_dropbox()
which handles the temporary file creation and cleanup automatically.
}
\examples{
\dontrun{
# Upload an existing file
upload_dropbox_file("mydata.csv", "/backup/mydata.csv")

# Overwrite an existing file
upload_dropbox_file("updated.csv", "/data/report.csv", mode = "overwrite")

# Create and upload a data frame (manual approach)
temp_file <- tempfile(fileext = ".csv")
write_csv(my_data, temp_file)
upload_dropbox_file(temp_file, "/data/my_data.csv", mode = "overwrite")
unlink(temp_file)  # Don't forget to clean up!

# Better pattern with on.exit() - ensures cleanup even if upload fails
upload_my_data <- function(df, dropbox_path) {
  temp_file <- tempfile(fileext = ".csv")
  on.exit(unlink(temp_file))  # Automatic cleanup
  write_csv(df, temp_file)
  upload_dropbox_file(temp_file, dropbox_path, mode = "overwrite")
}

# Or just use the convenience function!
upload_df_to_dropbox(my_data, "/data/my_data.csv")
}

}
\seealso{
\code{\link[=download_dropbox_file]{download_dropbox_file()}}, \code{\link[=upload_df_to_dropbox]{upload_df_to_dropbox()}}, \code{\link[=tempfile]{tempfile()}}, \code{\link[=unlink]{unlink()}}
}
